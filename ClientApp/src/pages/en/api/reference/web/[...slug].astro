---
import { getCollection } from "astro:content";
import { getTocByPath } from "@utils/tocUtils";
import { getYamlReferenceSlug } from "@utils/slugUtils";
import YamlLayoutPage from "@layouts/YamlLayoutPage.astro";


const collectionPath = `superoffice-docs/docs/en/api/reference/web`;
const tocData = await getTocByPath(collectionPath);

// Generates static paths from web collection
export async function getStaticPaths() {
  const collection = "web" as const;
  const yamlEntries = await getCollection(collection);
  return yamlEntries.map((entry) => {
    const generatedSlug = getYamlReferenceSlug(entry.filePath!, collection);
    return {
      params: { slug: `${generatedSlug}` },
      props: { entry },
    };
  });
}

const { entry } = Astro.props;

---

<YamlLayoutPage entry={entry} tocData={tocData} collection="web" />
